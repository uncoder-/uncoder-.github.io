<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>移动端集成reactNative调研分享 | 不三之选</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="全新项目初始化
文档地址"><meta name=generator content="Hugo 0.76.5"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link href=/dist/css/app.4fc0b62e4b82c997bb0041217cd6b979.css rel=stylesheet><meta property="og:title" content="移动端集成reactNative调研分享"><meta property="og:description" content="全新项目初始化
文档地址"><meta property="og:type" content="article"><meta property="og:url" content="/posts/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%9B%86%E6%88%90reactnative%E8%B0%83%E7%A0%94/"><meta property="article:published_time" content="2017-11-14T10:24:42+08:00"><meta property="article:modified_time" content="2017-11-14T10:24:42+08:00"><meta itemprop=name content="移动端集成reactNative调研分享"><meta itemprop=description content="全新项目初始化
文档地址"><meta itemprop=datePublished content="2017-11-14T10:24:42+08:00"><meta itemprop=dateModified content="2017-11-14T10:24:42+08:00"><meta itemprop=wordCount content="610"><meta itemprop=keywords content="react-native,android,ios,expo,gradle,bundle,"><meta name=twitter:card content="summary"><meta name=twitter:title content="移动端集成reactNative调研分享"><meta name=twitter:description content="全新项目初始化
文档地址"></head><body class="ma0 avenir bg-near-white"><header><div class=bg-dark-gray><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">不三之选</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/posts/ title="Posts page">Posts</a></li></ul></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">POSTS</aside><div id=sharing class=mt3><a href="https://www.facebook.com/sharer.php?u=/posts/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%9B%86%E6%88%90reactnative%E8%B0%83%E7%A0%94/" class="facebook no-underline" aria-label="share on Facebook"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765 50.32h6.744V33.998h4.499l.596-5.624h-5.095l.007-2.816c0-1.466.14-2.253 2.244-2.253h2.812V17.68h-4.5c-5.405.0-7.307 2.729-7.307 7.317v3.377h-3.369v5.625h3.369V50.32zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></a><a href="https://twitter.com/share?url=/posts/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%9B%86%E6%88%90reactnative%E8%B0%83%E7%A0%94/&text=%e7%a7%bb%e5%8a%a8%e7%ab%af%e9%9b%86%e6%88%90reactNative%e8%b0%83%e7%a0%94%e5%88%86%e4%ba%ab" class="twitter no-underline" aria-label="share on Twitter"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=/posts/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%9B%86%E6%88%90reactnative%E8%B0%83%E7%A0%94/&title=%e7%a7%bb%e5%8a%a8%e7%ab%af%e9%9b%86%e6%88%90reactNative%e8%b0%83%e7%a0%94%e5%88%86%e4%ba%ab" class="linkedin no-underline" aria-label="share on LinkedIn"><svg height="32" style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30C64 50.568 50.568 64 34 64zM26.354 48.137V27.71h-6.789v20.427H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg></a></div><h1 class="f1 athelas mt3 mb1">移动端集成reactNative调研分享</h1><p class=tracked>By <strong>uncoder</strong></p><time class="f6 mv4 dib tracked" datetime=2017-11-14T10:24:42+08:00>November 14, 2017</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><h2 id=全新项目初始化>全新项目初始化</h2><p><a href=https://facebook.github.io/react-native/docs/getting-started.html>文档地址</a></p><ul><li>方式一：expo 开发</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>npm install -g create-react-native-app
create-react-native-app AwesomeProject
cd AwesomeProject
npm start
使用expo扫描二维码即可
</code></pre></div><ul><li>方式二：手动初始化</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>brew install node
brew install watchman
npm install -g react-native-cli
react-native init AwesomeProject
cd AwesomeProject
react-native run-ios
</code></pre></div><h2 id=基于现有项目>基于现有项目</h2><p><a href=https://facebook.github.io/react-native/docs/integration-with-existing-apps.html>文档地址</a></p><ul><li>android 篇注意事项</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>build</span>.<span style=color:#a6e22e>gradle文件有多个</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>根目录有一个全局配置</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>应用中有一个本应用配置</span>
<span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>gradle下载失败</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>可配置翻墙</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>编辑根目录gradle</span>.<span style=color:#a6e22e>properties</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>配置代理</span>
<span style=color:#a6e22e>systemProp</span>.<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>proxyHost</span><span style=color:#f92672>=</span><span style=color:#ae81ff>127.0.0.1</span>
<span style=color:#a6e22e>systemProp</span>.<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>proxyPort</span><span style=color:#f92672>=</span><span style=color:#a6e22e>端口号</span>
<span style=color:#a6e22e>systemProp</span>.<span style=color:#a6e22e>https</span>.<span style=color:#a6e22e>proxyHost</span><span style=color:#f92672>=</span><span style=color:#ae81ff>127.0.0.1</span>
<span style=color:#a6e22e>systemProp</span>.<span style=color:#a6e22e>https</span>.<span style=color:#a6e22e>proxyPort</span><span style=color:#f92672>=</span><span style=color:#a6e22e>端口号</span>
<span style=color:#ae81ff>3</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>react</span><span style=color:#f92672>-</span><span style=color:#a6e22e>native开发者菜单需要手动开启</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>默认关闭</span>
.<span style=color:#a6e22e>setUseDeveloperSupport</span>(<span style=color:#66d9ef>true</span>)
<span style=color:#ae81ff>4</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>开发者菜单需要悬浮窗权限</span>
(<span style=color:#ae81ff>1</span>)<span style=color:#a6e22e>API</span> <span style=color:#ae81ff>23</span><span style=color:#a6e22e>版本以下</span>
<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>uses</span><span style=color:#f92672>-</span><span style=color:#a6e22e>permission</span> <span style=color:#a6e22e>android</span><span style=color:#f92672>:</span><span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;android.permission.SYSTEM_ALERT_WINDOW&#34;</span><span style=color:#f92672>/&gt;</span>
(<span style=color:#ae81ff>2</span>)<span style=color:#a6e22e>API</span> <span style=color:#ae81ff>23</span><span style=color:#a6e22e>版本以上</span>
<span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Override</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>onKeyUp</span>(<span style=color:#66d9ef>int</span> <span style=color:#a6e22e>keyCode</span>, <span style=color:#a6e22e>KeyEvent</span> <span style=color:#a6e22e>event</span>) {
    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>keyCode</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>KeyEvent</span>.<span style=color:#a6e22e>KEYCODE_MENU</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>mReactInstanceManager</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
        <span style=color:#a6e22e>mReactInstanceManager</span>.<span style=color:#a6e22e>showDevOptionsDialog</span>();
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
    }
    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>super</span>.<span style=color:#a6e22e>onKeyUp</span>(<span style=color:#a6e22e>keyCode</span>, <span style=color:#a6e22e>event</span>);
}
<span style=color:#ae81ff>5</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>模拟器运行时提示arm错误</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>在本应用的</span><span style=color:#f92672>/</span><span style=color:#a6e22e>build</span>.<span style=color:#a6e22e>gradle文件中字段defaultConfig添加</span>
<span style=color:#a6e22e>ndk</span> {
  <span style=color:#a6e22e>abiFilters</span> <span style=color:#e6db74>&#34;armeabi-v7a&#34;</span>, <span style=color:#e6db74>&#34;x86&#34;</span>
}
<span style=color:#a6e22e>packagingOptions</span> {
  <span style=color:#a6e22e>exclude</span> <span style=color:#e6db74>&#34;lib/arm64-v8a/librealm-jni.so&#34;</span>
}
<span style=color:#ae81ff>6</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>集成antd</span><span style=color:#f92672>-</span><span style=color:#a6e22e>mobile问题</span>
<span style=color:#75715e>//不能区分web和native，
</span><span style=color:#75715e>//https://github.com/ant-design/ant-design-mobile/issues/2054
</span><span style=color:#75715e>//按照下面方法使用
</span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Button</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;antd-mobile/lib/button&#39;</span>;
<span style=color:#ae81ff>7</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>真机调试</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>需要设置端口</span>
<span style=color:#ae81ff>8</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>npm使用脚本</span>
<span style=color:#e6db74>&#34;scripts&#34;</span><span style=color:#f92672>:</span> {
  <span style=color:#e6db74>&#34;start&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;node node_modules/react-native/local-cli/cli.js start&#34;</span>,
  <span style=color:#e6db74>&#34;build&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;react-native bundle --platform android --dev false --entry-file index.js --bundle-output app/src/main/assets/index.android.bundle --assets-dest app/src/main/res/&#34;</span>
}
</code></pre></div><ul><li>iOS 篇注意事项</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>podfile配置</span>
<span style=color:#a6e22e>source</span> <span style=color:#e6db74>&#39;https://github.com/CocoaPods/Specs.git&#39;</span>
<span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>Required</span> <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>Swift</span> <span style=color:#a6e22e>apps</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>指定ios版本</span>
<span style=color:#a6e22e>platform</span> <span style=color:#f92672>:</span><span style=color:#a6e22e>ios</span>, <span style=color:#e6db74>&#39;11.1&#39;</span>
<span style=color:#a6e22e>use_frameworks</span><span style=color:#f92672>!</span>
<span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>The</span> <span style=color:#a6e22e>target</span> <span style=color:#a6e22e>name</span> <span style=color:#a6e22e>is</span> <span style=color:#a6e22e>most</span> <span style=color:#a6e22e>likely</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>name</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>your</span> <span style=color:#a6e22e>project</span>.
<span style=color:#a6e22e>target</span> <span style=color:#e6db74>&#39;项目名称&#39;</span> <span style=color:#66d9ef>do</span>
  <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>第三方依赖</span>
  <span style=color:#a6e22e>pod</span> <span style=color:#e6db74>&#39;DoubleConversion&#39;</span>, <span style=color:#f92672>:</span><span style=color:#a6e22e>podspec</span> =&gt; <span style=color:#e6db74>&#39;../node_modules/react-native/third-party-podspecs/DoubleConversion.podspec&#39;</span>
  <span style=color:#a6e22e>pod</span> <span style=color:#e6db74>&#39;GLog&#39;</span>, <span style=color:#f92672>:</span><span style=color:#a6e22e>podspec</span> =&gt; <span style=color:#e6db74>&#39;../node_modules/react-native/third-party-podspecs/GLog.podspec&#39;</span>
  <span style=color:#a6e22e>pod</span> <span style=color:#e6db74>&#39;Folly&#39;</span>, <span style=color:#f92672>:</span><span style=color:#a6e22e>podspec</span> =&gt; <span style=color:#e6db74>&#39;../node_modules/react-native/third-party-podspecs/Folly.podspec&#39;</span>
  <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>Explicitly</span> <span style=color:#a6e22e>include</span> <span style=color:#a6e22e>Yoga</span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>you</span> <span style=color:#a6e22e>are</span> <span style=color:#a6e22e>using</span> <span style=color:#a6e22e>RN</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0.42.0</span>
  <span style=color:#a6e22e>pod</span> <span style=color:#e6db74>&#34;yoga&#34;</span>, <span style=color:#f92672>:</span><span style=color:#a6e22e>path</span> =&gt; <span style=color:#e6db74>&#34;../node_modules/react-native/ReactCommon/yoga&#34;</span>
  <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>Your</span> <span style=color:#e6db74>&#39;node_modules&#39;</span> <span style=color:#a6e22e>directory</span> <span style=color:#a6e22e>is</span> <span style=color:#a6e22e>probably</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>root</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>your</span> <span style=color:#a6e22e>project</span>,
  <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>but</span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>not</span>, <span style=color:#a6e22e>adjust</span> <span style=color:#a6e22e>the</span> <span style=color:#e6db74>`:path`</span> <span style=color:#a6e22e>accordingly</span>
  <span style=color:#a6e22e>pod</span> <span style=color:#e6db74>&#39;React&#39;</span>, <span style=color:#f92672>:</span><span style=color:#a6e22e>path</span> =&gt; <span style=color:#e6db74>&#39;../node_modules/react-native&#39;</span>, <span style=color:#f92672>:</span><span style=color:#a6e22e>subspecs</span> =&gt; [
    <span style=color:#e6db74>&#39;Core&#39;</span>,
    <span style=color:#e6db74>&#39;CxxBridge&#39;</span>, <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>Include</span> <span style=color:#66d9ef>this</span> <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>RN</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0.47</span>
    <span style=color:#e6db74>&#39;DevSupport&#39;</span>, <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>Include</span> <span style=color:#66d9ef>this</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>enable</span> <span style=color:#a6e22e>In</span><span style=color:#f92672>-</span><span style=color:#a6e22e>App</span> <span style=color:#a6e22e>Devmenu</span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>RN</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0.43</span>
    <span style=color:#e6db74>&#39;RCTText&#39;</span>,
    <span style=color:#e6db74>&#39;RCTNetwork&#39;</span>,
    <span style=color:#e6db74>&#39;RCTWebSocket&#39;</span>, <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>needed</span> <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>debugging</span>
    <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>Add</span> <span style=color:#a6e22e>any</span> <span style=color:#a6e22e>other</span> <span style=color:#a6e22e>subspecs</span> <span style=color:#a6e22e>you</span> <span style=color:#a6e22e>want</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>use</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>your</span> <span style=color:#a6e22e>project</span>
  ]
<span style=color:#a6e22e>end</span>
<span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>若运行时提示报错</span> <span style=color:#e6db74>&#39;fishhook/fishhook.h&#39;</span> <span style=color:#a6e22e>file</span> <span style=color:#a6e22e>not</span> <span style=color:#a6e22e>found</span>
<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#66d9ef>import</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>React</span><span style=color:#f92672>/</span><span style=color:#a6e22e>RCTDefines</span>.<span style=color:#a6e22e>h</span><span style=color:#f92672>&gt;</span>
<span style=color:#a6e22e>修改为</span>
<span style=color:#960050;background-color:#1e0010>#</span><span style=color:#66d9ef>import</span> <span style=color:#e6db74>&#34;fishhook.h&#34;</span>
<span style=color:#ae81ff>3</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>若模拟器提示failed</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>load</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>可Info</span>.<span style=color:#a6e22e>plist加入本地域名安全设置</span>
<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>key</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>NSAppTransportSecurity</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/key&gt;</span>
<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>dict</span><span style=color:#f92672>&gt;</span>
<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>key</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>NSExceptionDomains</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/key&gt;</span>
<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>dict</span><span style=color:#f92672>&gt;</span>
    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>key</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>localhost</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/key&gt;</span>
    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>dict</span><span style=color:#f92672>&gt;</span>
        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>key</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>NSTemporaryExceptionAllowsInsecureHTTPLoads</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/key&gt;</span>
        <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>true</span><span style=color:#f92672>/&gt;</span>
    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/dict&gt;</span>
<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/dict&gt;</span>
<span style=color:#ae81ff>4</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>提示JS</span> <span style=color:#a6e22e>Exception</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Application</span><span style=color:#960050;background-color:#1e0010>。。</span> <span style=color:#a6e22e>has</span> <span style=color:#a6e22e>not</span> <span style=color:#a6e22e>been</span> <span style=color:#a6e22e>registered</span>.<span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>项目名需要保持一致</span>
<span style=color:#a6e22e>AppRegistry</span>.<span style=color:#a6e22e>registerComponent</span>(<span style=color:#e6db74>&#39;项目名&#39;</span>, () =&gt; <span style=color:#a6e22e>App</span>);
<span style=color:#a6e22e>与</span>
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>rootView</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>RCTRootView</span>(
    <span style=color:#a6e22e>moduleName</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;项目名&#34;</span>
)
<span style=color:#ae81ff>5</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>xcode运行</span>
<span style=color:#a6e22e>product</span> =&gt; <span style=color:#a6e22e>scheme</span> =&gt; <span style=color:#a6e22e>Edit</span> <span style=color:#a6e22e>scheme</span>...
<span style=color:#a6e22e>info</span> =&gt; <span style=color:#a6e22e>build</span> <span style=color:#a6e22e>Configuration选择打包版本</span> <span style=color:#f92672>=</span><span style=color:#960050;background-color:#1e0010>》</span> <span style=color:#a6e22e>Debug</span><span style=color:#960050;background-color:#1e0010>／</span><span style=color:#a6e22e>Release</span>
<span style=color:#ae81ff>6</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>npm</span> <span style=color:#a6e22e>脚本</span>
<span style=color:#e6db74>&#34;scripts&#34;</span><span style=color:#f92672>:</span> {
    <span style=color:#e6db74>&#34;start&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;node node_modules/react-native/local-cli/cli.js start&#34;</span>,
    <span style=color:#e6db74>&#34;build&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;react-native bundle --entry-file index.js --platform ios --dev false --bundle-output release_ios/main.jsbundle --assets-dest release_ios/&#34;</span>
}
</code></pre></div><h2 id=reactnative-开发流程>reactNative 开发流程</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>1, 生成jsBoudle
2, 使用ios/android对应的ReactRootView进行加载服务器/本地资源文件
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>android 入口文件示例代码
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MainActivity</span> <span style=color:#66d9ef>extends</span> AppCompatActivity  <span style=color:#66d9ef>implements</span> DefaultHardwareBackBtnHandler<span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> ReactRootView mReactRootView<span style=color:#f92672>;</span>
            <span style=color:#66d9ef>private</span> ReactInstanceManager mReactInstanceManager<span style=color:#f92672>;</span>
            <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> OVERLAY_PERMISSION_REQ_CODE <span style=color:#f92672>=</span> 101<span style=color:#f92672>;</span>
            <span style=color:#a6e22e>@Override</span>
            <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onCreate</span><span style=color:#f92672>(</span>Bundle savedInstanceState<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>onCreate</span><span style=color:#f92672>(</span>savedInstanceState<span style=color:#f92672>);</span>
                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>Build<span style=color:#f92672>.</span><span style=color:#a6e22e>VERSION</span><span style=color:#f92672>.</span><span style=color:#a6e22e>SDK_INT</span> <span style=color:#f92672>&gt;=</span> Build<span style=color:#f92672>.</span><span style=color:#a6e22e>VERSION_CODES</span><span style=color:#f92672>.</span><span style=color:#a6e22e>M</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>Settings<span style=color:#f92672>.</span><span style=color:#a6e22e>canDrawOverlays</span><span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
                        Intent intent <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Intent<span style=color:#f92672>(</span>Settings<span style=color:#f92672>.</span><span style=color:#a6e22e>ACTION_MANAGE_OVERLAY_PERMISSION</span><span style=color:#f92672>,</span>
                                Uri<span style=color:#f92672>.</span><span style=color:#a6e22e>parse</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;package:&#34;</span> <span style=color:#f92672>+</span> getPackageName<span style=color:#f92672>()));</span>
                        startActivityForResult<span style=color:#f92672>(</span>intent<span style=color:#f92672>,</span> OVERLAY_PERMISSION_REQ_CODE<span style=color:#f92672>);</span>
                    <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>
        mReactRootView <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ReactRootView<span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>);</span>
        mReactInstanceManager <span style=color:#f92672>=</span> ReactInstanceManager<span style=color:#f92672>.</span><span style=color:#a6e22e>builder</span><span style=color:#f92672>()</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>setApplication</span><span style=color:#f92672>(</span>getApplication<span style=color:#f92672>())</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>setBundleAssetName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;index.android.bundle&#34;</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>setJSMainModulePath</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;index&#34;</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>addPackage</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> MainReactPackage<span style=color:#f92672>())</span>
<span style=color:#75715e>//                .setUseDeveloperSupport(BuildConfig.DEBUG)
</span><span style=color:#75715e></span>                <span style=color:#f92672>.</span><span style=color:#a6e22e>setUseDeveloperSupport</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>setInitialLifecycleState</span><span style=color:#f92672>(</span>LifecycleState<span style=color:#f92672>.</span><span style=color:#a6e22e>RESUMED</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>build</span><span style=color:#f92672>();</span>
        mReactRootView<span style=color:#f92672>.</span><span style=color:#a6e22e>startReactApplication</span><span style=color:#f92672>(</span>mReactInstanceManager<span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;MyReactNativeApp&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>

        setContentView<span style=color:#f92672>(</span>mReactRootView<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onPause</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>onPause</span><span style=color:#f92672>();</span>

        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>mReactInstanceManager <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            mReactInstanceManager<span style=color:#f92672>.</span><span style=color:#a6e22e>onHostPause</span><span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onResume</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>onResume</span><span style=color:#f92672>();</span>

        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>mReactInstanceManager <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            mReactInstanceManager<span style=color:#f92672>.</span><span style=color:#a6e22e>onHostResume</span><span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
        Log<span style=color:#f92672>.</span><span style=color:#a6e22e>e</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;onResume&#34;</span><span style=color:#f92672>,</span><span style=color:#e6db74>&#34;-----------------&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onDestroy</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>onDestroy</span><span style=color:#f92672>();</span>

        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>mReactInstanceManager <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            mReactInstanceManager<span style=color:#f92672>.</span><span style=color:#a6e22e>onHostDestroy</span><span style=color:#f92672>();</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onActivityResult</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> requestCode<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> resultCode<span style=color:#f92672>,</span> Intent data<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>requestCode <span style=color:#f92672>==</span> OVERLAY_PERMISSION_REQ_CODE<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>Build<span style=color:#f92672>.</span><span style=color:#a6e22e>VERSION</span><span style=color:#f92672>.</span><span style=color:#a6e22e>SDK_INT</span> <span style=color:#f92672>&gt;=</span> Build<span style=color:#f92672>.</span><span style=color:#a6e22e>VERSION_CODES</span><span style=color:#f92672>.</span><span style=color:#a6e22e>M</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>Settings<span style=color:#f92672>.</span><span style=color:#a6e22e>canDrawOverlays</span><span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
                    <span style=color:#75715e>// SYSTEM_ALERT_WINDOW permission not granted...
</span><span style=color:#75715e></span>                <span style=color:#f92672>}</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>onKeyUp</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> keyCode<span style=color:#f92672>,</span> KeyEvent event<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>keyCode <span style=color:#f92672>==</span> KeyEvent<span style=color:#f92672>.</span><span style=color:#a6e22e>KEYCODE_MENU</span> <span style=color:#f92672>&amp;&amp;</span> mReactInstanceManager <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            mReactInstanceManager<span style=color:#f92672>.</span><span style=color:#a6e22e>showDevOptionsDialog</span><span style=color:#f92672>();</span>
            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>onKeyUp</span><span style=color:#f92672>(</span>keyCode<span style=color:#f92672>,</span> event<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
    <span style=color:#a6e22e>@Override</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>invokeDefaultOnBackPressed</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>onBackPressed</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>ios示例代码
<span style=color:#f92672>import</span> UIKit
<span style=color:#f92672>import</span> React

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ViewController</span><span style=color:#f92672>:</span> UIViewController <span style=color:#f92672>{</span>

    override func <span style=color:#a6e22e>viewDidLoad</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>viewDidLoad</span><span style=color:#f92672>()</span>
        <span style=color:#75715e>// Do any additional setup after loading the view, typically from a nib.
</span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>

    override func <span style=color:#a6e22e>didReceiveMemoryWarning</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>didReceiveMemoryWarning</span><span style=color:#f92672>()</span>
        <span style=color:#75715e>// Dispose of any resources that can be recreated.
</span><span style=color:#75715e></span>    <span style=color:#f92672>}</span>

    <span style=color:#a6e22e>@IBAction</span> func <span style=color:#a6e22e>handleClick</span><span style=color:#f92672>(</span>_ sender<span style=color:#f92672>:</span> Any<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        NSLog<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Hello&#34;</span><span style=color:#f92672>)</span>
        let jsCodeLocation <span style=color:#f92672>=</span> URL<span style=color:#f92672>(</span>string<span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;http://localhost:8081/index.bundle?platform=ios&#34;</span><span style=color:#f92672>)</span>

<span style=color:#75715e>//        let filePath = Bundle.main.path(forResource: &#34;main&#34;, ofType: &#34;jsbundle&#34;)
</span><span style=color:#75715e>//        let jsCodeLocation = URL(fileURLWithPath: filePath!)
</span><span style=color:#75715e></span>
        let rootView <span style=color:#f92672>=</span> RCTRootView<span style=color:#f92672>(</span>
            bundleURL<span style=color:#f92672>:</span> jsCodeLocation<span style=color:#f92672>,</span>
            moduleName<span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;reactApp&#34;</span><span style=color:#f92672>,</span>
            initialProperties<span style=color:#f92672>:</span> nil<span style=color:#f92672>,</span>
            launchOptions<span style=color:#f92672>:</span> nil
        <span style=color:#f92672>)</span>
        let vc <span style=color:#f92672>=</span> UIViewController<span style=color:#f92672>()</span>
        vc<span style=color:#f92672>.</span><span style=color:#a6e22e>view</span> <span style=color:#f92672>=</span> rootView
        self<span style=color:#f92672>.</span><span style=color:#a6e22e>present</span><span style=color:#f92672>(</span>vc<span style=color:#f92672>,</span> animated<span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>,</span> completion<span style=color:#f92672>:</span> nil<span style=color:#f92672>)</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><ul class=pa0><li class=list><a href=/tags/react-native class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">react-native</a></li><li class=list><a href=/tags/android class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">android</a></li><li class=list><a href=/tags/ios class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">ios</a></li><li class=list><a href=/tags/expo class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">expo</a></li><li class=list><a href=/tags/gradle class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">gradle</a></li><li class=list><a href=/tags/bundle class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">bundle</a></li></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"></aside></article></main><footer class="bg-dark-gray bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=/>&copy; 不三之选 2020</a><div></div></div></footer><script src=/dist/js/app.3fc0f988d21662902933.js></script></body></html>